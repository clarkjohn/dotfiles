" keymap
" alt+up = Drop Frame 
" alt+right = Smart Step into
" alt+down = Step over
" alt+left = Resume

set number
set incsearch hlsearch
set ignorecase smartcase
set clipboard=unnamed
set scrolloff=5
set showmode
set surround

" Integrate with system clipboard
set clipboard=unnamedplus,unnamed

let mapleader = ","
let g:mapleader = ","

" esc in insert mode
inoremap jj <esc>
" esc in command mode
cnoremap jj <C-C>

" Yank from cursor to end of line
nnoremap Y y$

" Movement in insert mode
inoremap <C-h> <C-o>h
inoremap <C-l> <C-o>l
inoremap <C-j> <C-o>j
inoremap <C-k> <C-o>k

" Moving lines up and down
nnoremap <a-j> :m .+1<CR>==
nnoremap <a-k> :m .-2<CR>==
inoremap <a-j> <Esc>:m .+1<CR>==gi
inoremap <a-k> <Esc>:m .-2<CR>==gi
vnoremap <a-j> :m '>+1<CR>gv=gv
vnoremap <a-k> :m '<-2<CR>gv=gv

" format code
vnoremap <leader>fc :action ReformatCode<cr>

" format whitespaces away
vnoremap <leader>fw :%s/\s\+$//<cr>:let @/=''<CR>

" split
vnoremap <leader>\| :vsplit<cr>

" reload
vnoremap <leader>z :source ~/.ideavimrc<cr>

" disable visual mode delete
vnoremap <BS> d

" Intellij only

" common
vnoremap r :<C-u>action RenameElement<CR>

" view
vnoremap <Space>n :action ActivateProjectToolWindow<CR>
vnoremap <Space>z :action HideAllWindows<CR>

" goto
vnoremap gd :<C-u>action GotoDeclaration<CR>

vnoremap gs :<C-u>action GotoSuperMethod<CR>
vnoremap gi :<C-u>action GotoImplementation<CR>
vnoremap gt :<C-u>action GotoTest<CR>
vnoremap gu :<C-u>action ShowUsages<CR>
vnoremap gf :<C-u>action GotoFile<CR>

" run
vnoremap <Space>rd :action Debug<cr>
vnoremap <Space>rr :action Run<cr>
vnoremap <Space>rs :action Stop<cr>

vnoremap <Space>h  :action CallHierarchy<CR>
vnoremap <Space>ll :action LocalHistory.ShowHistory<CR>
vnoremap <Space>i  :action InspectCode<cr>

vnoremap ]e :action GotoNextError<CR>
vnoremap [e :action GotoPreviousError<CR>

" version control
vnoremap <Space>vv :action Vcs.Show.Log<cr>
vnoremap <Space>vc :action Compare.LastVersion<cr>
vnoremap <Space>l  :action Vcs.Show.Local.Changes<cr>
vnoremap ]v :action VcsShowNextChangeMarker<CR>
vnoremap [v :action VcsShowPrevChangeMarker<CR>

" debug
vnoremap <Space>b :action ViewBreakpoints<cr>

" bookmarks
vnoremap <Space>m :action ShowBookmarks<CR>
vnoremap ]m :action GotoNextBookmark<CR>
vnoremap [m :action GotoPreviousBookmark<CR>